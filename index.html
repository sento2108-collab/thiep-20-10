<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ch√∫c Vy 20/10 ‚Äî Kaito Kid</title>
<style>
  :root{
    --bg1: #fff0f4; /* pastel pink */
    --bg2: #f7f2ff; /* pastel lilac */
    --accent: #ff6fa3;
    --muted: #6b5561;
  }
  html,body{height:100%;margin:0;font-family: "Poppins","Segoe UI",Arial, sans-serif; -webkit-font-smoothing:antialiased}
  body{
    background: radial-gradient(1200px 600px at 10% 20%, #fff3f8 0%, rgba(255,255,255,0) 25%),
                linear-gradient(120deg,var(--bg1),var(--bg2));
    overflow:hidden;
    color:var(--muted);
  }

  /* Container ch√≠nh */
  .stage{
    position:relative;
    width:100%;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
    box-sizing:border-box;
  }

  /* Card text bar b√™n tr√™n (n√∫t replay) */
  .topbar{
    position:absolute; top:18px; left:18px; right:18px;
    display:flex; justify-content:space-between; align-items:center;
    gap:12px;
  }
  .title{
    font-size:28px; font-weight:700; color:#222;
    text-shadow: 0 2px 0 rgba(255,255,255,0.65);
    display:flex; align-items:center; gap:10px;
  }
  .title .flower { font-size:28px }

  .replay{
    background:linear-gradient(180deg,#ffffff,#ffeef6);
    border:1px solid rgba(0,0,0,0.06);
    padding:8px 12px;border-radius:12px; cursor:pointer; font-weight:600;
    box-shadow:0 6px 18px rgba(170,50,110,0.08);
  }

  /* Kaito - h√¨nh nh√¢n v·∫≠t */
  .kaito-wrap{
    position:absolute;
    left:8%;
    bottom:6%;
    width:360px;
    height:auto;
    pointer-events:none;
    transform-origin:50% 100%;
    will-change:transform,opacity;
  }
  #kaito {
    width:100%;
    height:auto;
    display:block;
    filter: drop-shadow(0 18px 28px rgba(130,45,80,0.18));
    transform-origin:50% 100%;
  }

  /* animation Kaito v√†o, b∆∞·ªõc l√™n, c√∫nh m≈© v√† b·∫Øn */
  .kaito-wrap.enter{
    animation: kaitoEnter 1.2s ease forwards;
  }
  .kaito-wrap.nudge{
    animation: kaitoNudge 0.9s ease-in-out infinite alternate;
  }
  @keyframes kaitoEnter {
    0% { transform: translateY(80vh) scale(.6) rotate(0deg); opacity:0; }
    60% { transform: translateY(-8vh) scale(.98) rotate(-2deg); opacity:1; }
    100% { transform: translateY(0) scale(1) rotate(0deg); opacity:1; }
  }
  @keyframes kaitoNudge {
    0% { transform: translateY(0) rotate(0deg) }
    100% { transform: translateY(-10px) rotate(-1.5deg) }
  }

  /* Thi·ªáp (kh·ªüi t·∫°o ·ªü b√™n Kaito) v√† b·∫Øn ra gi·ªØa */
  .card {
    position:absolute;
    width:320px;
    max-width:90vw;
    height:190px;
    left: calc(8% + 360px); /* b·∫Øt ƒë·∫ßu g·∫ßn Kaito */
    bottom: 22%;
    transform-origin:center;
    border-radius:14px;
    background: linear-gradient(135deg,#fff7fb,#ffeef6);
    box-shadow: 0 30px 60px rgba(200,60,110,0.12), 0 6px 20px rgba(0,0,0,0.06);
    padding:18px;
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    text-align:center;
    opacity:0;
    transform: translateY(0) scale(.6) rotate(-8deg);
    will-change: transform, opacity;
  }

  .card.show {
    animation: cardFly 1.1s cubic-bezier(.12,.9,.3,1.05) forwards;
  }
  @keyframes cardFly {
    0% { opacity:1; transform: translateY(0) scale(.6) rotate(-8deg); left: calc(8% + 360px); bottom:22% }
    40% { transform: translateY(-30vh) scale(1.05) rotate(8deg); left:50%; }
    100% { opacity:1; transform: translate(-50%,-50%) scale(1) rotate(0deg); left:50%; bottom:50%;}
  }

  /* N·ªôi dung thi·ªáp */
  .card h2{
    margin:0; font-size:20px; color: #ff2f7f; font-weight:800;
    text-shadow:0 6px 22px rgba(255,101,152,0.12);
  }
  .card p{ margin:8px 0 0; color:#6c5860; line-height:1.35; font-size:14px; padding:0 8px }

  /* Glow v√≤ng s√°ng quanh thi·ªáp */
  .glow {
    position:absolute; width:420px; height:420px; border-radius:50%;
    left:50%; top:50%; transform:translate(-50%,-50%) scale(.4);
    pointer-events:none; z-index:-1; opacity:0;
    background: radial-gradient(circle at 30% 40%, rgba(255,150,170,0.18), transparent 25%),
                radial-gradient(circle at 70% 60%, rgba(250,200,220,0.12), transparent 30%);
    filter: blur(26px);
  }
  .glow.show { animation: glowIn 0.9s ease forwards; }
  @keyframes glowIn { from{opacity:0; transform:translate(-50%,-50%) scale(.2)} to{opacity:1; transform:translate(-50%,-50%) scale(1)}}

  /* Sparkles (kim tuy·∫øn) */
  .sparkle {
    position:absolute; width:8px; height:8px; border-radius:50%;
    background: radial-gradient(circle, #fff 0%, #ffd1e6 45%, transparent 70%);
    box-shadow:0 0 10px rgba(255,200,230,0.9);
    pointer-events:none;
    transform:translate(-50%,-50%) scale(.6);
  }

  /* Petal / flower emoji */
  .petal{
    position:absolute; font-size:26px; pointer-events:none; will-change:transform,opacity;
    transform-origin:center;
    text-shadow:0 2px 6px rgba(0,0,0,0.12);
  }

  /* Confetti */
  .confetti {
    position:absolute; width:10px; height:14px; opacity:0.95; border-radius:2px;
    pointer-events:none; transform-origin:center;
  }

  /* Replay tip */
  .hint {
    position:absolute; right:18px; bottom:18px; font-size:13px; color:#7a5b6a;
    background: rgba(255,255,255,0.6); padding:8px 12px; border-radius:12px;
    box-shadow:0 6px 18px rgba(0,0,0,0.05);
  }

  /* Responsive */
  @media (max-width:720px){
    .kaito-wrap{ left:4%; width:260px }
    .card{ width:86vw; left: 20%; bottom: 16% }
  }
</style>
</head>
<body>
  <div class="stage" id="stage">
    <div class="topbar">
      <div class="title">üíå <strong>Ch√∫c Vy 20/10</strong> <span class="flower">üå∑</span></div>
      <div style="display:flex;gap:10px;align-items:center">
        <button class="replay" id="replayBtn">üîÅ Xem l·∫°i</button>
      </div>
    </div>

    <!-- Kaito (b·∫°n ph·∫£i upload file 'kaito.png' v√†o c√πng th∆∞ m·ª•c v·ªõi index.html) -->
    <div class="kaito-wrap" id="kaitoWrap">
      <img id="kaito" src="kaito.png" alt="Kaito Kid">
    </div>

    <!-- T·∫•m thi·ªáp (b·∫Øn ra) -->
    <div class="card" id="card">
      <h2>üíê Ch√∫c m·ª´ng ng√†y 20/10</h2>
      <p>Ch√∫c Vy lu√¥n vui v·∫ª, xinh ƒë·∫πp v√† r·∫°ng r·ª° nh∆∞ ƒë√≥a hoa üå∏</p>
    </div>

    <!-- glow background -->
    <div class="glow" id="glow"></div>

    <div class="hint">Kh√¥ng c√≥ nh·∫°c ‚Ä¢ Nh·∫•n "Xem l·∫°i" ƒë·ªÉ ph√°t l·∫°i animation</div>
  </div>

<script>
  // =============== C√ÅC H√ÄM HI·ªÜU ·ª®NG ===============
  const kaitoWrap = document.getElementById('kaitoWrap');
  const card = document.getElementById('card');
  const glow = document.getElementById('glow');
  const stage = document.getElementById('stage');
  const replayBtn = document.getElementById('replayBtn');

  function clearParticles(){
    document.querySelectorAll('.petal, .sparkle, .confetti').forEach(n=>n.remove());
  }

  function spawnSparkles(centerX, centerY, count=12){
    for(let i=0;i<count;i++){
      const s = document.createElement('div');
      s.className='sparkle';
      const angle = Math.random()*Math.PI*2;
      const r = 20 + Math.random()*140;
      s.style.left = (centerX + Math.cos(angle)*10) + 'px';
      s.style.top = (centerY + Math.sin(angle)*10) + 'px';
      s.style.opacity = 0;
      stage.appendChild(s);
      const dx = (Math.random()-0.5)*200;
      const dy = - (50 + Math.random()*220);
      s.animate([
        { transform:'translate(0,0) scale(.6)', opacity:0 },
        { transform:`translate(${dx}px, ${dy}px) scale(1.1)`, opacity:1 },
        { transform:`translate(${dx*1.2}px, ${dy*1.5}px) scale(.4)`, opacity:0 }
      ], { duration: 900 + Math.random()*600, easing:'cubic-bezier(.2,.9,.2,1)' });
      setTimeout(()=>s.remove(), 1600);
    }
  }

  function spawnPetals(centerX, centerY, count=14){
    const emojis = ['üå∏','üå∫','üå∑','üíÆ'];
    for(let i=0;i<count;i++){
      const p = document.createElement('div');
      p.className='petal';
      p.textContent = emojis[Math.floor(Math.random()*emojis.length)];
      const left = centerX + (Math.random()-0.5)*80;
      const top = centerY + (Math.random()-0.5)*40;
      p.style.left = left + 'px';
      p.style.top = top + 'px';
      p.style.opacity = 0;
      stage.appendChild(p);
      const dx = (Math.random()-0.5)*600;
      const rotate = (Math.random()-0.5)*720;
      const dur = 2500 + Math.random()*2500;
      p.animate([
        { transform:'translateY(0) rotate(0deg) scale(.9)', opacity:0 },
        { transform:`translate(${dx}px, ${600 + Math.random()*200}px) rotate(${rotate}deg) scale(1)`, opacity:1 },
        { transform:`translate(${dx*1.2}px, ${900 + Math.random()*300}px) rotate(${rotate*1.5}deg) scale(.6)`, opacity:0 }
      ], { duration: dur, easing: 'cubic-bezier(.2,.8,.2,1)'});
      setTimeout(()=>p.remove(), dur+80);
    }
  }

  function spawnConfetti(centerX, centerY, count=28){
    const colors = ['#FF6FA3','#FFD166','#B28CFF','#FFA7C4','#FFBFDA'];
    for(let i=0;i<count;i++){
      const c = document.createElement('div');
      c.className = 'confetti';
      c.style.background = colors[Math.floor(Math.random()*colors.length)];
      c.style.left = (centerX + (Math.random()-0.5)*60) + 'px';
      c.style.top = (centerY + (Math.random()-0.5)*20) + 'px';
      c.style.opacity = (0.7 + Math.random()*0.3);
      c.style.transform = `rotate(${Math.random()*360}deg)`;
      stage.appendChild(c);
      const dx = (Math.random()-0.5)*1000;
      const dy = 200 + Math.random()*600;
      const rot = (Math.random()-0.5)*1080;
      const dur = 1200 + Math.random()*1400;
      c.animate([
        { transform:`translate(0,0) rotate(0deg)`, opacity:1 },
        { transform:`translate(${dx}px, ${dy}px) rotate(${rot}deg)`, opacity:0.9 }
      ], { duration: dur, easing:'cubic-bezier(.2,.9,.2,1)'});
      setTimeout(()=>c.remove(), dur+40);
    }
  }

  // L·∫•y to·∫° ƒë·ªô trung t√¢m ph·∫ßn t·ª≠
  function centerOf(el){
    const r = el.getBoundingClientRect();
    return { x: r.left + r.width/2, y: r.top + r.height/2 };
  }

  // PLAY ANIMATION
  function play(){
    clearParticles();
    // reset states
    kaitoWrap.classList.remove('enter','nudge');
    card.classList.remove('show');
    glow.classList.remove('show');

    // initial show kaito
    setTimeout(()=>{
      kaitoWrap.classList.add('enter');
      // sau khi Kaito v·ª´a v√†o, b·∫Øt ƒë·∫ßu nudge (l∆° l·ª≠ng)
      setTimeout(()=> kaitoWrap.classList.add('nudge'), 1400);
    }, 80);

    // T·∫°o thi·ªáp bay ra (t·ª´ Kaito)
    setTimeout(()=>{
      // show tiny opacity while starting
      card.style.opacity = 1;
      card.classList.add('show');

      // Glow l·ªõn xu·∫•t hi·ªán
      setTimeout(()=> glow.classList.add('show'), 220);

      // spawn sparkle + petals + confetti t·ª´ v·ªã tr√≠ trung t√¢m thi·ªáp
      const cpos = centerOf(card);
      spawnSparkles(cpos.x, cpos.y, 18);
      spawnPetals(cpos.x, cpos.y, 20);
      spawnConfetti(cpos.x, cpos.y, 28);

      // ti·∫øp t·ª•c l·ªçc petal r·∫£i nh·∫π
      setTimeout(()=> spawnPetals(cpos.x, cpos.y, 12), 500);
      setTimeout(()=> spawnConfetti(cpos.x, cpos.y, 18), 700);
      setTimeout(()=> spawnSparkles(cpos.x, cpos.y, 10), 900);
    }, 1600); // th·ªùi gian ƒë·ªÉ Kaito xu·∫•t hi·ªán tr∆∞·ªõc
  }

  // Kh·ªüi ch·∫°y l·∫ßn ƒë·∫ßu
  window.addEventListener('load', ()=>{
    setTimeout(play, 200);
  });

  // n√∫t replay
  replayBtn.addEventListener('click', ()=>{
    // t·∫°m ng·∫Øt nudge ƒë·ªÉ reset
    kaitoWrap.classList.remove('nudge');
    requestAnimationFrame(()=>{
      // reset transform b·∫±ng remove/forceReflow
      kaitoWrap.classList.remove('enter');
      card.classList.remove('show');
      glow.classList.remove('show');
      clearParticles();
      setTimeout(()=> play(), 160);
    });
  });

  // Khi ng∆∞·ªùi resize: x√≥a particles c≈© ƒë·ªÉ tr√°nh r∆°i sai v·ªã tr√≠
  window.addEventListener('resize', ()=> clearParticles());
</script>
</body>
</html>
